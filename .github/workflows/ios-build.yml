- name: Build iOS app (Archive Only)
  run: |
    cd ios/App
    xcodebuild -workspace App.xcworkspace \
               -scheme App \
               -configuration Release \
               -destination generic/platform=iOS \
               -archivePath App.xcarchive \
               CODE_SIGN_IDENTITY="" \
               CODE_SIGNING_REQUIRED=NO \
               CODE_SIGNING_ALLOWED=NO \
               archive

- name: Create IPA Manually (No Export)
  run: |
    cd ios/App
    
    echo "ğŸ“¦ Archive ë‚´ìš© í™•ì¸:"
    ls -la App.xcarchive/Products/Applications/
    
    echo "ğŸ”¨ ìˆ˜ë™ IPA ìƒì„± ì‹œì‘..."
    
    # Payload í´ë” ìƒì„±
    mkdir -p Payload
    
    # App íŒŒì¼ì„ Payloadë¡œ ë³µì‚¬
    cp -r App.xcarchive/Products/Applications/App.app Payload/
    
    # IPA íŒŒì¼ ìƒì„± (ZIP ì••ì¶•)
    zip -r App-unsigned.ipa Payload/
    
    echo "âœ… ë¬´ì„œëª… IPA ìƒì„± ì™„ë£Œ!"
    ls -lh *.ipa

- name: Verify IPA Contents
  run: |
    cd ios/App
    echo "ğŸ“‹ ìƒì„±ëœ IPA íŒŒì¼ ì •ë³´:"
    file App-unsigned.ipa
    unzip -l App-unsigned.ipa | head -20

# Export ë‹¨ê³„ ì™„ì „íˆ ì œê±°
# - name: Export IPA (Development)

# Upload ë‹¨ê³„ë„ ì„ì‹œ ì œê±°  
# - name: Upload to App Store Connect
